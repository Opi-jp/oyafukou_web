# Channel Access Token 取得ガイド

## 手順

### 1. LINE Developers Consoleにアクセス
1. [LINE Developers Console](https://developers.line.biz/console/) にアクセス
2. LINEアカウントでログイン

### 2. チャンネルを選択
1. プロバイダー一覧から「八丈島親不孝通り」（または作成したプロバイダー名）を選択
2. Channel ID: 2007545466 のチャンネルをクリック

### 3. Messaging API設定タブに移動
1. 上部のタブから「Messaging API設定」をクリック
2. 下にスクロールして「チャンネルアクセストークン」セクションを探す

### 4. Channel Access Token（長期）を発行
1. 「チャンネルアクセストークン（長期）」の項目を確認
2. もしトークンが表示されていない場合：
   - 「発行」ボタンをクリック
   - 確認ダイアログが表示されたら「発行」を選択
3. 発行されたトークンが表示される（非常に長い文字列）

### 5. トークンをコピー
1. トークンの右側にある「コピー」ボタンをクリック
2. または、トークン文字列を選択してコピー

## スクリーンショット付き詳細手順

### ステップ1: LINE Developers Consoleにログイン
![](https://developers.line.biz/console/)
- メールアドレスまたはQRコードでログイン

### ステップ2: プロバイダーとチャンネル選択
- プロバイダー名をクリック
- Channel ID: 2007545466 のチャンネルを選択

### ステップ3: Messaging API設定
- 上部タブの「Messaging API設定」をクリック
- ページを下にスクロール

### ステップ4: トークン発行エリア
以下のような項目が表示されます：

```
チャンネルアクセストークン（長期）
有効期限なしのチャンネルアクセストークンを発行します。

[発行] ボタン
```

### ステップ5: 発行されたトークン
発行後は以下のような形式で表示されます：

```
チャンネルアクセストークン（長期）
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... (非常に長い文字列)
[コピー] [再発行]
```

## 注意事項

1. **トークンは秘密情報です**
   - GitHubなどの公開リポジトリにコミットしない
   - `.env.local`ファイルに保存（.gitignoreに含まれているか確認）

2. **トークンの再発行**
   - 「再発行」ボタンを押すと古いトークンは無効になります
   - 再発行した場合は、すべての環境変数を更新する必要があります

3. **トークンが見つからない場合**
   - 「Basic settings」タブではなく「Messaging API」タブを確認
   - チャンネルの種類が「Messaging API」であることを確認

## トークン取得後の設定

1. **ローカル環境（.env.local）**
```env
LINE_CHANNEL_ACCESS_TOKEN=取得したトークンをここに貼り付け
LINE_CHANNEL_SECRET=fab3332e7698f60fc8aabc2303db096e
```

2. **Vercel環境変数**
- Vercelダッシュボード → Settings → Environment Variables
- `LINE_CHANNEL_ACCESS_TOKEN` に同じトークンを設定

## トラブルシューティング

### Q: 「発行」ボタンが見つからない
A: 以下を確認してください：
- Messaging APIタブを開いているか
- ページの下部までスクロールしたか
- チャンネルの種類がMessaging APIか

### Q: トークンをコピーできない
A: トークン全体を手動で選択してコピー、または「コピー」ボタンを使用

### Q: どのトークンを使えばいいか分からない
A: 「チャンネルアクセストークン（長期）」を使用してください。短期トークンは使用しません。